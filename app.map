{"version":3,"sources":["js/setup.js","templates/detail.js","templates/edit.js","templates/form.js","templates/sidebar.js","js/model/cms.js","js/collection/cms.js","js/views/sidebarview.js","js/views/formview.js","js/views/detailview.js","js/views/editview.js","js/router.js","js/index.js"],"sourcesContent":["var AppTemplates = {};\n","AppTemplates['detail'] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper, alias1=helpers.helperMissing, alias2=\"function\", alias3=this.escapeExpression;\n\n  return \"<section>\\n    <header>\\n        <p>\"\n    + alias3(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</p>\\n    </header>\\n    <section>\\n        <p>\"\n    + alias3(((helper = (helper = helpers.blog || (depth0 != null ? depth0.blog : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"blog\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</p>\\n    </section>\\n    <a href=\\\"#\"\n    + alias3(((helper = (helper = helpers._id || (depth0 != null ? depth0._id : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"_id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"/edit\\\"><button class=\\\"edit\\\">Edit</button></a>\\n</section>\\n\";\n},\"useData\":true});","AppTemplates['edit'] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper, alias1=helpers.helperMissing, alias2=\"function\", alias3=this.escapeExpression;\n\n  return \"<form class=\\\"form-view\\\">\\n    <input value=\\\"\"\n    + alias3(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n    <textarea class=\\\"blog\\\" cols=\\\"60\\\" rows=\\\"10\\\" >\"\n    + alias3(((helper = (helper = helpers.blog || (depth0 != null ? depth0.blog : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"blog\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</textarea>\\n    <button class=\\\"save\\\">Save</button>\\n    <button class=\\\"delete\\\">Delete</button>\\n</form>\\n\";\n},\"useData\":true});","AppTemplates['form'] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<form>\\n    <input type=\\\"text\\\" class=\\\"title\\\" placeholder=\\\"Title\\\">\\n        <textarea name=\\\"text\\\" class=\\\"blog\\\" cols=\\\"60\\\" rows=\\\"10\\\" placeholder=\\\"Start blog here.....\\\"></textarea>\\n    <input type=\\\"submit\\\" value=\\\"Create\\\">\\n</form>\\n\\n\";\n},\"useData\":true});","AppTemplates['sidebar'] = Handlebars.template({\"1\":function(depth0,helpers,partials,data,blockParams) {\n    var stack1, alias1=this.lambda, alias2=this.escapeExpression;\n\n  return \"        <li>\\n           <a href=\\\"#\"\n    + alias2(alias1(((stack1 = blockParams[0][0]) != null ? stack1._id : stack1), depth0))\n    + \"\\\">\\n                <p>\"\n    + alias2(alias1(((stack1 = blockParams[0][0]) != null ? stack1.title : stack1), depth0))\n    + \"</p>\\n                <p>\"\n    + alias2(alias1(((stack1 = blockParams[0][0]) != null ? stack1.blog : stack1), depth0))\n    + \"</p>\\n            </a>\\n        </li>\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data,blockParams) {\n    var stack1;\n\n  return \"<ul>\\n\"\n    + ((stack1 = helpers.each.call(depth0,depth0,{\"name\":\"each\",\"hash\":{},\"fn\":this.program(1, data, 1, blockParams),\"inverse\":this.noop,\"data\":data,\"blockParams\":blockParams})) != null ? stack1 : \"\")\n    + \"</ul>\\n\";\n},\"useData\":true,\"useBlockParams\":true});","var Blog = Backbone.Model.extend({\n  idAttribute: '_id',\n  defaults: {\n    title:'',\n    blog:'',\n  },\n});\n","var BlogList = Backbone.Collection.extend({\n  model: Blog,\n  url: 'http://tiny-lr.herokuapp.com/collections/ms-blogs',\n});\n","var SidebarView = Backbone.View.extend({\n  template: AppTemplates.sidebar,\n  className: 'sidebar',\n\n  initialize: function() {\n    this.listenTo(this.collection, 'sync add change', this.render);\n    this.render();\n  },\n\n  render: function() {\n    var html = this.template(this.collection.toJSON());\n    this.$el.html(html);\n\n    return this;\n  },\n\n});\n","var FormView = Backbone.View.extend({\n  template: AppTemplates.form,\n  className: 'form-view',\n\n  initialize: function() {\n\n  },\n\n  events: {\n    'submit form': 'create',\n  },\n\n  render: function() {\n    var html = this.template(this.collection);\n    this.$el.html(html);\n    return this;\n  },\n\n  create: function(ev) {\n    ev.preventDefault();\n\n    var title = this.$el.find('.title').val();\n    var blog = this.$el.find('.blog').val();\n\n    this.collection.create({title: title, blog: blog});\n\n    this.$('.title').val('');\n    this.$('.blog').val('');\n    this.collection = new Blog();\n  },\n\n});\n","var DetailView = Backbone.View.extend({\n  template: AppTemplates.detail,\n\n  intialize: function() {\n    this.listenTo(this.model, 'add sync change', this.render);\n  },\n\n  render: function() {\n    var data = {};\n\n    if (this.model && this.model.toJSON) {\n      data = this.model.toJSON();\n    }\n\n    var html = this.template(data);\n    this.$el.html(html);\n\n    return this;\n  },\n});\n","var EditView = Backbone.View.extend({\n  template: AppTemplates.edit,\n  className: 'edit',\n\n  events: {\n    'click .save': 'save',\n    'click .delete': 'delete',\n  },\n\n  initialize: function() {\n    this.render();\n  },\n\n  render: function() {\n    var data = {};\n    if (this.model) {\n      data = this.model.toJSON();\n    }\n\n    var html = this.template(data);\n    this.$el.html(html);\n\n    console.info('render');\n\n    return this;\n  },\n\n  save: function(ev) {\n    ev.preventDefault();\n    var title = this.$el.find('.title').val();\n    var blog = this.$el.find('.blog').val();\n    this.model.save({title: title, blog: blog}).then(function() {\n      router.navigate('', {trigger: true});\n    });\n  },\n\n  delete: function(ev) {\n    ev.preventDefault();\n    this.model.destroy().then(function() {\n      // router.navigate('', {trigger: true});\n    });\n  },\n});\n","var AppRouter = Backbone.Router.extend({\n  initialize: function() {\n    this.collection = new BlogList();\n    this.formview = new FormView({collection: this.collection});\n    this.sidebar = new SidebarView({collection: this.collection});\n\n    $('#target').html(this.formview.render().el);\n    $('#sidebar').html(this.sidebar.render().el);\n\n    this.collection.fetch();\n  },\n\n  routes: {\n    ' ': 'index',\n    ':id': 'view',\n    ':id/edit': 'edit',\n  },\n\n  index: function() {\n    var _this = this;\n\n    var attachDetail = function() {\n      var model = _this.collection.first();\n      _this.indexPost = new DetailView({model: model});\n      $('#target').html(_this.indexPost.render().el);\n    };\n\n    attachDetail();\n    this.listenTo(this.collection, 'sync', attachDetail);\n  },\n\n  view: function(id) {\n    var _this = this;\n    var showList = function() {\n      var model = _this.collection.get(id);\n\n      _this.currentView = new DetailView({\n        model: model,\n      });\n      $('#target').html(_this.currentView.render().el);\n    };\n\n    showList();\n    this.listenTo(this.collection, 'sync', showList);\n  },\n\n  edit: function(id) {\n    var _this = this;\n\n    var showEdit = function() {\n      var model = _this.collection.get(id);\n      _this.editView = new EditView({model: model});\n      $('#target').html(_this.editView.render().el);\n    };\n\n    showEdit();\n    this.listenTo(this.collection, 'sync', showEdit);\n  },\n\n});\n","var router = new AppRouter();\n\nBackbone.history.start();\n"],"names":[],"mappings":"AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;","file":"app.js"}